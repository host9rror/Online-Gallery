{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nlet page = 1;\nlet searchWord;\n\nexport async function imageSearch(value) {\n  const API = '43068097-aa3ed59823608d0655ab40c7d';\n  const defaultURL = \"https://pixabay.com/api/\";\n\n  const params = new URLSearchParams({\n    key: API,\n    q: value,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: 15\n  });\n\n  try {\n    const response = await axios.get(defaultURL, { params });\n\n    if (response.status !== 200) {\n      throw new Error(\"Error\");\n    }\n\n    const data = response.data;\n    if (data.totalHits === 0) {\n      return null;\n    }\n\n    return data;\n  } catch (error) {\n    return error;\n  }\n}\n\nexport async function requestForImgs() {\n  searchWord = document.querySelector('#search-input').value.trim();\n\n  try {\n    const data = await imageSearch(searchWord);\n    return data;\n  } catch (error) {\n    return error;\n  }\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function renderImages(data, galleryImages) {\n  if (!Array.isArray(data)) {\n    console.error(Error);\n    return;\n  }\n\n  const galleryMarkup = data\n    .map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n      return `<li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\">\n          <img\n            src=\"${webformatURL}\"\n            data-source=\"${largeImageURL}\"\n            alt=\"${tags}\"\n          />\n          <ul class=\"gallery-description\">\n            <li class=\"gallery-desc-item\"><div class=\"desc-info\"><h3>Likes</h3><p>${likes}</p></div></li>\n            <li class=\"gallery-desc-item\"><div class=\"desc-info\"><h3>Views</h3><p>${views}</p></div></li>\n            <li class=\"gallery-desc-item\"><div class=\"desc-info\"><h3>Comments</h3><p>${comments}</p></div></li>\n            <li class=\"gallery-desc-item\"><div class=\"desc-info\"><h3>Downloads</h3><p>${downloads}</p></div></li>\n          </ul>\n        </a>\n      </li>`;\n    })\n    .join('');\n\n  if (galleryImages) { \n    galleryImages.innerHTML = galleryMarkup;\n    const lightbox = new SimpleLightbox('.gallery-item a', {\n      captionsData: 'alt',\n      captionDelay: 250\n    });\n  } else {\n    console.error(Error);\n  }\n}\n","import iziToast from \"izitoast\";\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { imageSearch, requestForImgs } from \"./js/pixabay-api\";\nimport { renderImages } from \"./js/render-functions\";\n\nconst searchForm = document.querySelector('#search-form');\nconst galleryImages = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst moreButton = document.querySelector('.more-btn');\n\nsearchForm.addEventListener('submit', event => {\n    event.preventDefault();\n\n    galleryImages.innerHTML = '';\n    const query = event.target.querySelector('#search-input').value.trim();\n\n    if (query) {\n        loader.classList.add('loading');\n\n        imageSearch(query)\n          .then(data => {\n            if (data === null) {\n                iziToast.error({\n                  position: \"topRight\",\n                  title: '❌',\n                  icon: '',\n                  message: \"Sorry, there are no images matching your search query. Please try again!\",\n                });\n            } else {\n                renderImages(data.hits, galleryImages); \n                toggleMoreButton(data.hits);\n            }\n          })\n          .catch(error => {\n            console.error(error);\n          })\n          .finally(() => {\n            loader.classList.remove('loading');\n          });\n    } \n    event.target.reset();\n});\n\nmoreButton.addEventListener('click', (event) => {\n  requestForImgs(event); \n});\n\n\nfunction toggleMoreButton(data) {\n    moreButton.classList.toggle('is-hidden', data.length === 0);\n}\n"],"names":["page","searchWord","imageSearch","value","API","defaultURL","params","response","axios","data","error","requestForImgs","renderImages","galleryImages","galleryMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","searchForm","loader","moreButton","event","query","iziToast","toggleMoreButton"],"mappings":"owBAEA,IAAIA,EAAO,EACPC,EAEG,eAAeC,EAAYC,EAAO,CACvC,MAAMC,EAAM,qCACNC,EAAa,2BAEbC,EAAS,IAAI,gBAAgB,CACjC,IAAKF,EACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMH,EACN,SAAU,EACd,CAAG,EAED,GAAI,CACF,MAAMO,EAAW,MAAMC,EAAM,IAAIH,EAAY,CAAE,OAAAC,CAAM,CAAE,EAEvD,GAAIC,EAAS,SAAW,IACtB,MAAM,IAAI,MAAM,OAAO,EAGzB,MAAME,EAAOF,EAAS,KACtB,OAAIE,EAAK,YAAc,EACd,KAGFA,CACR,OAAQC,EAAO,CACd,OAAOA,CACR,CACH,CAEO,eAAeC,GAAiB,CACrCV,EAAa,SAAS,cAAc,eAAe,EAAE,MAAM,OAE3D,GAAI,CAEF,OADa,MAAMC,EAAYD,CAAU,CAE1C,OAAQS,EAAO,CACd,OAAOA,CACR,CACH,CC3CO,SAASE,EAAaH,EAAMI,EAAe,CAChD,GAAI,CAAC,MAAM,QAAQJ,CAAI,EAAG,CACxB,QAAQ,MAAM,KAAK,EACnB,MACD,CAED,MAAMK,EAAgBL,EACnB,IAAI,CAAC,CAAE,aAAAM,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,KAC1D;AAAA,mBACML,CAAa;AAAA;AAAA,mBAEbD,CAAY;AAAA,2BACJC,CAAa;AAAA,mBACrBC,CAAI;AAAA;AAAA;AAAA,oFAG6DC,CAAK;AAAA,oFACLC,CAAK;AAAA,uFACFC,CAAQ;AAAA,wFACPC,CAAS;AAAA;AAAA;AAAA,YAI5F,EACA,KAAK,EAAE,EAENR,GACFA,EAAc,UAAYC,EACT,IAAIQ,EAAe,kBAAmB,CACrD,aAAc,MACd,aAAc,GACpB,CAAK,GAED,QAAQ,MAAM,KAAK,CAEvB,CChCA,MAAMC,EAAa,SAAS,cAAc,cAAc,EAClDV,EAAgB,SAAS,cAAc,UAAU,EACjDW,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAa,SAAS,cAAc,WAAW,EAErDF,EAAW,iBAAiB,SAAUG,GAAS,CAC3CA,EAAM,eAAc,EAEpBb,EAAc,UAAY,GAC1B,MAAMc,EAAQD,EAAM,OAAO,cAAc,eAAe,EAAE,MAAM,OAE5DC,IACAH,EAAO,UAAU,IAAI,SAAS,EAE9BtB,EAAYyB,CAAK,EACd,KAAKlB,GAAQ,CACRA,IAAS,KACTmB,EAAS,MAAM,CACb,SAAU,WACV,MAAO,IACP,KAAM,GACN,QAAS,0EAC3B,CAAiB,GAEDhB,EAAaH,EAAK,KAAMI,CAAa,EACrCgB,EAAiBpB,EAAK,IAAI,EAE1C,CAAW,EACA,MAAMC,GAAS,CACd,QAAQ,MAAMA,CAAK,CAC/B,CAAW,EACA,QAAQ,IAAM,CACbc,EAAO,UAAU,OAAO,SAAS,CAC7C,CAAW,GAEPE,EAAM,OAAO,OACjB,CAAC,EAEDD,EAAW,iBAAiB,QAAUC,GAAU,CAC9Cf,EAAoB,CACtB,CAAC,EAGD,SAASkB,EAAiBpB,EAAM,CAC5BgB,EAAW,UAAU,OAAO,YAAahB,EAAK,SAAW,CAAC,CAC9D"}
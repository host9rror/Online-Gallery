{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function imageSearch(value, page = 1) {\n  const API = '43068097-aa3ed59823608d0655ab40c7d';\n  const defaultURL = \"https://pixabay.com/api/\";\n\n  const params = new URLSearchParams({\n    key: API,\n    q: value,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: 15,\n  });\n\n  try {\n    const response = await axios.get(defaultURL, { params });\n\n    if (response.status !== 200) {\n      throw new Error(\"Error\");\n    }\n\n    const data = response.data;\n    if (data.totalHits === 0) {\n      return null;\n    }\n\n    return data;\n  } catch (error) {\n    return error;\n  }\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function renderImages(data, galleryImages) {\n  if (!Array.isArray(data)) {\n    console.error(Error);\n    return;\n  }\n\n  const galleryMarkup = data\n    .map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n      return `<li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\">\n          <img\n            src=\"${webformatURL}\"\n            data-source=\"${largeImageURL}\"\n            alt=\"${tags}\"\n          />\n          <ul class=\"gallery-description\">\n            <li class=\"gallery-desc-item\"><div class=\"desc-info\"><h3>Likes</h3><p>${likes}</p></div></li>\n            <li class=\"gallery-desc-item\"><div class=\"desc-info\"><h3>Views</h3><p>${views}</p></div></li>\n            <li class=\"gallery-desc-item\"><div class=\"desc-info\"><h3>Comments</h3><p>${comments}</p></div></li>\n            <li class=\"gallery-desc-item\"><div class=\"desc-info\"><h3>Downloads</h3><p>${downloads}</p></div></li>\n          </ul>\n        </a>\n      </li>`;\n    })\n    .join('');\n\n  if (galleryImages) { \n    galleryImages.innerHTML = galleryMarkup;\n    const lightbox = new SimpleLightbox('.gallery-item a', {\n      captionsData: 'alt',\n      captionDelay: 250\n    });\n  } else {\n    console.error(Error);\n  }\n}\n","import iziToast from \"izitoast\";\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { imageSearch } from \"./js/pixabay-api\";\nimport { renderImages } from \"./js/render-functions\";\n\nconst searchForm = document.querySelector('#search-form');\nconst galleryImages = document.querySelector('.gallery');\nlet loader = null;\nconst moreButton = document.querySelector('.more-btn');\nlet currentPage = 1;\nlet currentQuery = '';\nlet allImages = []; \n\nfunction showLoader() {\n    loader = document.createElement('div');\n    loader.classList.add('loader', 'loading');\n    document.body.appendChild(loader);\n    moreButton.classList.add('is-hidden');\n}\n\nfunction hideLoader() {\n    if (loader) {\n        loader.remove();\n        loader = null;\n    }\n}\n\nsearchForm.addEventListener('submit', async (event) => {\n    event.preventDefault();\n\n    galleryImages.innerHTML = '';\n    const query = event.target.querySelector('#search-input').value.trim();\n\n    if (query) {\n        showLoader();\n        try {\n            const data = await imageSearch(query);\n            if (data === null) {\n                iziToast.error({\n                    position: \"topRight\",\n                    title: 'âŒ',\n                    icon: '',\n                    message: \"Sorry, there are no images matching your search query. Please try again!\",\n                });\n                moreButton.classList.add('is-hidden');\n            } else {\n                allImages = data.hits; \n                renderImages(allImages, galleryImages);\n                toggleMoreButton(data.totalHits, allImages.length);\n                currentQuery = query;\n                currentPage = 1;\n            }\n        } catch (error) {\n            console.error(error);\n        } finally {\n            hideLoader();\n        }\n    } \n    event.target.reset();\n});\n\n\nmoreButton.addEventListener('click', async (event) => {\n    showLoader();\n    try {\n        const nextPageData = await imageSearch(currentQuery, currentPage + 1);\n        if (nextPageData === null || nextPageData.hits.length === 0) {\n            moreButton.classList.add('is-hidden');\n            iziToast.info({\n                position: \"topRight\",\n                title: '',\n                message: \"We're sorry, but you've reached the end of search results.\",\n            });\n        } else {\n            allImages = allImages.concat(nextPageData.hits);\n            renderImages(allImages, galleryImages);\n            currentPage++;\n\n            const galleryItems = document.querySelectorAll('.gallery-item');\n            const lastGalleryItem = galleryItems[galleryItems.length - nextPageData.hits.length];\n            const cardHeight = lastGalleryItem.getBoundingClientRect().height;\n            window.scrollBy({\n                top: cardHeight * 2, \n                behavior: 'smooth'\n            });\n\n            toggleMoreButton(nextPageData.totalHits, allImages.length);\n        }\n    } catch (error) {\n        console.error(error);\n    } finally {\n        hideLoader();\n    }\n});\n\nfunction toggleMoreButton(totalHits, loadedImagesCount) {\n    if (loadedImagesCount >= totalHits) {\n        moreButton.classList.add('is-hidden');\n    } else {\n        moreButton.classList.remove('is-hidden');\n    }\n}\n"],"names":["imageSearch","value","page","API","defaultURL","params","response","axios","data","error","renderImages","galleryImages","galleryMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","searchForm","loader","moreButton","currentPage","currentQuery","allImages","showLoader","hideLoader","event","query","iziToast","toggleMoreButton","nextPageData","galleryItems","cardHeight","totalHits","loadedImagesCount"],"mappings":"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"}